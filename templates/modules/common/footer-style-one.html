<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<th:block th:fragment="footer-style-one">

    <script th:if="${theme.config.footer.footerContent.style_one.runtime_enable}" async="async">(function () {
        var grt = new Date("[[${#strings.arraySplit(theme.config.basics.siteStartTime, '-')[1]}]]/[[${#strings.arraySplit(theme.config.basics.siteStartTime, '-')[2]}]]/[[${#strings.arraySplit(theme.config.basics.siteStartTime, '-')[0]}]] 00:00:00"); //è®¾ç½®ç½‘ç«™ä¸Šçº¿æ—¶é—´
        var now = new Date();
        var dnum;
        var hnum;
        var mnum;
        var snum;
        var nowHour;
        var t;
        var n;

        // è®¡ç®—å¹¶æ›´æ–°å¤©æ•°ã€å°æ—¶æ•°ã€åˆ†é’Ÿæ•°å’Œç§’æ•°
        function updateTime() {
            now = new Date(); // æ›´æ–° now çš„å€¼
            nowHour = now.getHours(); // æ›´æ–° nowHour çš„å€¼
            var days = (now - grt) / 1000 / 60 / 60 / 24;
            dnum = Math.floor(days);
            var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
            hnum = Math.floor(hours);
            if (String(hnum).length == 1) {
                hnum = "0" + hnum;
            }
            var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
            mnum = Math.floor(minutes);
            if (String(mnum).length == 1) {
                mnum = "0" + mnum;
            }
            var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
            snum = Math.round(seconds);
            if (String(snum).length == 1) {
                snum = "0" + snum;
            }
            t = Math.trunc(234e8 + (now - grt) / 1e3 * 17)
            n = (t / 1496e5).toFixed(6)
        }

        // æ›´æ–°ç½‘é¡µä¸­æ˜¾ç¤ºçš„ç½‘ç«™è¿è¡Œæ—¶é—´
        function updateHtml() {
            const footer = document.getElementById("footer");
            if (!footer) return
            let currentTimeHtml = "";
            let img = "";
            let description = "";
            if (nowHour < 18 && nowHour >= 9) {
                // å¦‚æœæ˜¯ä¸Šç­æ—¶é—´
                img = "[(${theme.config.footer.footerContent.style_one.work_img})]";
                description = "[(${theme.config.footer.footerContent.style_one.work_description})]";
            } else {
                // å¦‚æœæ˜¯ä¸‹ç­æ—¶é—´
                img = "[(${theme.config.footer.footerContent.style_one.offduty_img})]";
                description = "[(${theme.config.footer.footerContent.style_one.offduty_description})]";
            }
            if (document.getElementById("workboard")) {
                currentTimeHtml =  `<img class="workSituationImg boardsign" src="${img}" alt="${description}" title="${description}">
                <div id="runtimeTextTip"> æœ¬ç«™å±…ç„¶è¿è¡Œäº† ${dnum} å¤©<span id='runtime'> ${hnum} å°æ—¶ ${mnum} åˆ† ${snum} ç§’ </span><i class='haofont hao-icon-heartbeat' style='color:red'></i> <br> æ—…è¡Œè€… 1 å·å½“å‰è·ç¦»åœ°çƒ ${t} åƒç±³ï¼Œçº¦ä¸º ${n} ä¸ªå¤©æ–‡å•ä½ ğŸš€ </div>`
                document.getElementById("workboard").innerHTML = currentTimeHtml;
            }
        }
        setInterval(() => {
            updateTime();
            updateHtml();
        }, 1000);
    })();</script>

</th:block>

</html>