<!DOCTYPE html>
<html lang="en" th:replace="~{modules/layouts/layout :: layout(content = ~{::content}, htmlType = 'post')}"
      xmlns:th="http://www.thymeleaf.org">

<th:block th:fragment="content">
    <div class="post" id="body-wrap">

        <header class="post-bg" id="page-header">
            <nav th:replace="~{modules/nav :: nav(title = ${post.spec.title})}"></nav>
            <div class="coverdiv" id="coverdiv">
                <img alt="cover" class="nolazyload" id="post-cover"
                     th:src="${#strings.isEmpty(post.spec.cover) ? theme.config.layout.postRandomImg : post.spec.cover}">
            </div>

            <div id="post-info">
                <div id="post-firstinfo">
                    <div class="meta-firstline">
                        <!-- è¿™é‡Œè¦è·³è½¬åˆ°ç‰ˆæƒé¡µ -->
                        <!--<a class="post-meta-original" th:href="@{/cc}" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®">åŸåˆ›</a>-->
                        <span class="post-meta-categories" th:each="category : ${post.categories}"
                              th:if="${not #lists.isEmpty(post.categories)}">
                            <a class="post-meta-categories" th:href="@{${category.status.permalink}}"
                               th:text="${category.spec.displayName}" th:title="${category.spec.displayName}">
                            </a>
                        </span>
                        <div class="tag_share" th:if="${not #lists.isEmpty(post.tags)}">
                            <div class="post-meta__tag-list">
                                <a class="post-meta__tags" th:each="tag : ${post.tags}"
                                   th:href="@{${tag.status.permalink}}" th:text="'#'+${tag.spec.displayName}"
                                   th:title="${tag.spec.displayName}"></a>
                            </div>
                        </div>
                    </div>
                </div>
                <h1 class="post-title" th:text="${post.spec.title}"></h1>
                <div id="post-meta">
                    <div class="meta-secondline">
                        <span class="post-meta-date">
                            <i class="iconfont icon-calendar-alt post-meta-icon"></i>
                            <time th:attr="datetime=${#dates.format(post.spec.publishTime, 'yyyy-MM-dd')}"
                                  th:text="${#dates.format(post.spec.publishTime,'yyyy-MM-dd')}"
                                  th:title="${#dates.format(post.spec.publishTime,'yyyy-MM-dd')}">
                            </time>
                        </span>

                        <span class="post-meta-wordcount"
                              th:with="wordCount = ${#strings.length(post.content.content)}">
                            <i class="iconfont icon-file-word post-meta-icon" title="å­—æ•°"></i>
                            <span class="post-meta-label">å­—æ•°:</span>
                            <span class="word-count" th:text="${{wordCount}}"></span>
                            <span class="post-meta-separator"></span>
                            <i class="iconfont icon-clock post-meta-icon" title="é˜…è¯»è€—æ—¶"></i>
                            <span class="post-meta-label">é˜…è¯»è€—æ—¶:</span>
                            <span>[[${wordCount / 400}]] åˆ†é’Ÿ</span>
                        </span>

                        <!--<span class="post-meta-wechat" title="è¯¥æ–‡ç« å·²åœ¨å…¬ä¼—å·ä¸­æ›´æ–°"><i-->
                        <!--        class="fab fa-weixin post-meta-icon"></i>å…¬ä¼—å·åŒæ­¥</span>-->
                        <span class="post-meta-pv" data-flag-title="çƒ­åº¦">
                            <i class="iconfont icon-hotjar post-meta-icon"></i>
                            <span class="post-meta-label">çƒ­åº¦:</span>
                            <span id="visit" th:text="${post.stats.visit}"></span>
                        </span>
                        <span th:if="${post.spec.allowComment}" class="post-meta-commentcount"
                              onclick="heo.scrollTo('#post-comment');" title="è¯„è®ºæ•°">
                            <i class="iconfont icon-comment-alt"></i>
                            <span class="post-meta-label">è¯„è®º:</span>
                            <a th:if="${#strings.equals(theme.config.comments.use, 'commentWidget')}"
                               href="#post-comment"><span id="comment-count"
                                                          th:text="${post.stats.comment}"></span></a>

                            <a th:if="${#strings.equals(theme.config.comments.use, 'Twikoo')}" href="#post-comment">
                                <span id="twikoo-count"></span></a>
                        </span>
                    </div>

                </div>
            </div>
            <section class="main-hero-waves-area waves-area">
                <svg class="waves-svg" preserveAspectRatio="none" shape-rendering="auto" viewBox="0 24 150 28"
                     xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg">
                    <defs>
                        <path
                                d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"
                                id="gentle-wave"></path>
                    </defs>
                    <g class="parallax">
                        <use href="#gentle-wave" x="48" y="0"></use>
                        <use href="#gentle-wave" x="48" y="3"></use>
                        <use href="#gentle-wave" x="48" y="5"></use>
                        <use href="#gentle-wave" x="48" y="7"></use>
                    </g>
                </svg>
            </section>
        </header>
        <main class="layout" id="content-inner" th:classappend="${theme.config.sidebar.location}">
            <div id="post">

                <!-- <link rel="stylesheet" href="https://cdn1.tianli0.top/gh/zhheo/Post-Abstract-AI@0.7/tianli_gpt.css">
                <script>
                let tianliGPT_postSelector = '#post #article-container';
                let tianliGPT_key = 'QokJo3m2LZ53uAqICeLO';
                </script>
                <script src="https://blog.zhheo.com/js/heo_gpt.js"></script> -->

                <!-- <div class="post-ai">
                    <div class="ai-title"><i class="anzhiyufont anzhiyu-icon-bilibili"></i>
                        <div class="ai-title-text">AI-æ‘˜è¦</div><i
                            class="anzhiyufont anzhiyu-icon-arrow-rotate-right"></i>
                        <div class="ai-tag" id="ai-tag">Tianli GPT</div>
                    </div>
                    <div class="ai-explanation" style="display: block;">AIåˆå§‹åŒ–ä¸­...</div>
                    <div class="ai-btn-box">
                        <div class="ai-btn-item">ä»‹ç»è‡ªå·±</div>
                        <div class="ai-btn-item">ç”Ÿæˆæœ¬æ–‡ç®€ä»‹</div>
                        <div class="ai-btn-item">æ¨èç›¸å…³æ–‡ç« </div>
                        <div class="ai-btn-item">å‰å¾€ä¸»é¡µ</div>
                        <div class="ai-btn-item" id="go-tianli-blog">å‰å¾€tianliåšå®¢</div>
                    </div>
                    <script data-pjax>(function () {
                                             // å½“å‰éšæœºåˆ°çš„aiæ‘˜è¦åˆ°index
                                             let lastAiRandomIndex = -1;
                                             let animationRunning = true; // æ ‡å¿—å˜é‡ï¼Œæ§åˆ¶åŠ¨ç”»å‡½æ•°çš„è¿è¡Œ
                                             // å½“å‰gptæ¨¡å¼
                                             let mode = "tianli"
                                             // åˆ·æ–°ç‚¹å‡»æ¬¡æ•°
                                             let refreshNum = 0
                                             // è®°å½•ä¸Šä¸€æ¬¡ä¼ é€’ç»™aiAbstractçš„å‚æ•°
                                             let prevParam;
                                             const aiTitleRefreshIcon = document.querySelector(".ai-title .anzhiyufont.anzhiyu-icon-arrow-rotate-right")
                                             const explanation = document.querySelector(".ai-explanation");
                                             const post_ai = document.querySelector(".post-ai");
                                             let ai_str = "";
                                             let ai_str_length = "";
                                             let delay_init = 600;
                                             let i = 0;
                                             let j = 0;
                                             let sto = [];
                                             let elapsed = 0;
                                             const animate = timestamp => {
                                                 if (!animationRunning) {
                                                     return; // åŠ¨ç”»å‡½æ•°åœæ­¢è¿è¡Œ
                                                 }
                                                 if (!animate.start) animate.start = timestamp;
                                                 elapsed = timestamp - animate.start;
                                                 if (elapsed >= 20) {
                                                     animate.start = timestamp;
                                                     if (i < ai_str_length - 1) {
                                                         let char = ai_str.charAt(i + 1);
                                                         let delay = /[,.ï¼Œã€‚!?ï¼ï¼Ÿ]/.test(char) ? 150 : 20;
                                                         if (explanation.firstElementChild) {
                                                             explanation.removeChild(explanation.firstElementChild);
                                                         }
                                                         explanation.innerHTML += char;
                                                         let div = document.createElement("div");
                                                         div.className = "ai-cursor";
                                                         explanation.appendChild(div);
                                                         i++;
                                                         if (delay === 150) {
                                                             document.querySelector(".ai-explanation .ai-cursor").style.opacity = "0";
                                                         }
                                                         if (i === ai_str_length - 1) {
                                                             observer.disconnect(); // æš‚åœç›‘å¬
                                                             explanation.removeChild(explanation.firstElementChild);
                                                         }
                                                         sto[0] = setTimeout(() => {
                                                             requestAnimationFrame(animate);
                                                         }, delay);
                                                     }
                                                 } else {
                                                     requestAnimationFrame(animate);
                                                 }
                                             };
                                             const observer = new IntersectionObserver(
                                                 entries => {
                                                     let isVisible = entries[0].isIntersecting;
                                                     animationRunning = isVisible; // æ ‡å¿—å˜é‡æ›´æ–°
                                                     if (animationRunning) {
                                                         delay_init = i === 0 ? 200 : 20;
                                                         sto[1] = setTimeout(() => {
                                                             if (j) {
                                                                 i = 0;
                                                                 j = 0;
                                                             }
                                                             if (i === 0) {
                                                                 explanation.innerHTML = ai_str.charAt(0);
                                                             }
                                                             requestAnimationFrame(animate);
                                                         }, delay_init);
                                                     }
                                                 },
                                                 { threshold: 0 }
                                             );
                                             function clearSTO() {
                                                 if (sto.length) {
                                                     sto.forEach(item => {
                                                         if (item) {
                                                             clearTimeout(item);
                                                         }
                                                     });
                                                 }
                                             }
                                             function startAI(str, df = true) {
                                                 i = 0; //é‡ç½®è®¡æ•°å™¨
                                                 j = 1;
                                                 clearSTO();
                                                 animationRunning = false;
                                                 elapsed = 0;
                                                 observer.disconnect(); // æš‚åœä¸Šä¸€æ¬¡ç›‘å¬
                                                 explanation.innerHTML = df ? "ç”Ÿæˆä¸­. . ." : "è¯·ç­‰å¾…. . .";
                                                 ai_str = str;
                                                 ai_str_length = ai_str.length;
                                                 observer.observe(post_ai); //å¯åŠ¨æ–°ç›‘å¬
                                             }

                                             async function aiAbstract(num = 1000) {
                                                 i = 0; //é‡ç½®è®¡æ•°å™¨
                                                 j = 1;
                                                 clearSTO();
                                                 animationRunning = false;
                                                 elapsed = 0;
                                                 observer.disconnect(); // æš‚åœä¸Šä¸€æ¬¡ç›‘å¬
                                                 if (mode === "tianli") {
                                                     num = Math.max(10, Math.min(2000, num));
                                                     const options = {
                                                         key: "QokJo3m2LZ53uAqICeLO",
                                                         Referer: "https://0206.ink/"
                                                     };
                                                     const truncateDescription = ("Docker Swarmå¸¸ç”¨å‘½ä»¤" + "æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹, Tokenç›¸å…³, åˆ›å»ºnginxæœåŠ¡, æŸ¥çœ‹swarmé›†ç¾¤ä¸­çš„æœåŠ¡, killå…¶ä¸­ä¸€ä¸ªå®¹å™¨, ä¿®æ”¹æœåŠ¡å®ä¾‹æ•°é‡ä¸º3, åˆ é™¤nginxæœåŠ¡, åˆ é™¤swarmèŠ‚ç‚¹, docker swarm å¸¸ç”¨å‘½ä»¤, docker node å¸¸ç”¨å‘½ä»¤, docker service å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ç›¸å…³æŸ¥çœ‹åŠ å…¥çš„å‘½ä»¤æŸ¥çœ‹åŠ å…¥çš„å‘½ä»¤é‡ç½®çš„ä»…æ‰“å°åˆ›å»ºæœåŠ¡ä¸‹è½½ç§æœ‰ä»“åº“é•œåƒåˆ›å»ºä¸ªå®¹å™¨ä¸ºç§æœ‰ä»“åº“æŸ¥çœ‹é›†ç¾¤ä¸­çš„æœåŠ¡å…¶ä¸­ä¸€ä¸ªå®¹å™¨ç­‰ä¼šè‡ªåŠ¨å¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨ä¿®æ”¹æœåŠ¡å®ä¾‹æ•°é‡ä¸ºåˆ é™¤æœåŠ¡åˆ é™¤èŠ‚ç‚¹å¸¸ç”¨å‘½ä»¤åˆå§‹åŒ–é›†ç¾¤æŸ¥çœ‹å·¥ä½œèŠ‚ç‚¹çš„æŸ¥çœ‹ç®¡ç†èŠ‚ç‚¹çš„åŠ å…¥é›†ç¾¤ä¸­å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹åˆ é™¤æŸä¸ªèŠ‚ç‚¹å¼ºåˆ¶åˆ é™¤æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…èŠ‚ç‚¹é™çº§ç”±ç®¡ç†èŠ‚ç‚¹é™çº§ä¸ºå·¥ä½œèŠ‚ç‚¹èŠ‚ç‚¹å‡çº§ç”±å·¥ä½œèŠ‚ç‚¹å‡çº§ä¸ºç®¡ç†èŠ‚ç‚¹æ›´æ–°èŠ‚ç‚¹æŸ¥çœ‹èŠ‚ç‚¹ä¸­çš„ä»»åŠ¡å¸¸ç”¨å‘½ä»¤éƒ¨ç½²æœåŠ¡æŸ¥çœ‹æœåŠ¡è¯¦æƒ…äº§çœ‹æŸä¸ªæœåŠ¡æ—¥å¿—æŸ¥çœ‹æ‰€æœ‰æœåŠ¡è¯¦æƒ…åˆ é™¤æŸä¸ªæœåŠ¡å¼ºåˆ¶åˆ é™¤è®¾ç½®æŸä¸ªæœåŠ¡ä¸ªæ•°æ›´æ–°æŸä¸ªæœåŠ¡").trim().substring(0, num)

                                                     const queryParams = `key=${options.key}&content=${truncateDescription}`;
                                                     const requestOptions = {
                                                         method: "GET",
                                                         headers: {
                                                             "Content-Type": "application/json",
                                                             Referer: options.Referer
                                                         },
                                                     };
                                                     try {
                                                         let animationInterval = null
                                                         if (animationInterval) clearInterval(animationInterval);
                                                         animationInterval = setInterval(() => {
                                                             const animationText = "ç”Ÿæˆä¸­" + ".".repeat(j);
                                                             explanation.innerHTML = animationText;
                                                             j = (j % 3) + 1; // åœ¨ 1ã€2ã€3 ä¹‹é—´å¾ªç¯
                                                         }, 500);
                                                         const response = await fetch(`https://summary.tianli0.top/?${queryParams}`, requestOptions);
                                                         console.log(response)
                                                         const result = await response.json();
                                                         const summary = result.summary.trim();
                                                         setTimeout(() => {
                                                             aiTitleRefreshIcon.style.opacity = "1";
                                                         }, 300)
                                                         startAI(summary);
                                                         clearInterval(animationInterval)

                                                     } catch (error) {
                                                         console.error(error);
                                                     }
                                                 } else {
                                                     const strArr = "true".split(",").map(item => item.trim()); // å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°ç»„ï¼Œå»é™¤æ¯ä¸ªå­—ç¬¦ä¸²å‰åçš„ç©ºæ ¼
                                                     if (strArr.length !== 1) {
                                                         let randomIndex = Math.floor(Math.random() * strArr.length); // éšæœºç”Ÿæˆä¸€ä¸ªç´¢å¼•
                                                         while (randomIndex === lastAiRandomIndex) { // å¦‚æœéšæœºåˆ°äº†ä¸Šæ¬¡çš„ç´¢å¼•
                                                             randomIndex = Math.floor(Math.random() * strArr.length); // å†æ¬¡éšæœº
                                                         }
                                                         lastAiRandomIndex = randomIndex; // æ›´æ–°ä¸Šæ¬¡éšæœºåˆ°çš„ç´¢å¼•
                                                         startAI(strArr[randomIndex]);
                                                     } else {
                                                         startAI(strArr[0])
                                                     }
                                                     setTimeout(() => {
                                                         aiTitleRefreshIcon.style.opacity = "1";
                                                     }, 600)
                                                 }
                                             }

                                             function aiRecommend() {
                                                 i = 0; //é‡ç½®è®¡æ•°å™¨
                                                 j = 1;
                                                 clearSTO();
                                                 animationRunning = false;
                                                 elapsed = 0;
                                                 explanation.innerHTML = "ç”Ÿæˆä¸­. . .";
                                                 ai_str = "";
                                                 ai_str_length = "";
                                                 observer.disconnect(); // æš‚åœä¸Šä¸€æ¬¡ç›‘å¬
                                                 sto[2] = setTimeout(() => {
                                                     explanation.innerHTML = recommendList();
                                                 }, 600);
                                             }
                                             function aiGoHome() {
                                                 startAI("æ­£åœ¨å‰å¾€åšå®¢ä¸»é¡µ...", false);
                                                 sto[2] = setTimeout(() => {
                                                     pjax.loadUrl("/");
                                                 }, 1000);
                                             }
                                             const ai_btn_item = document.querySelectorAll(".ai-btn-item");
                                             function Introduce() {
                                                 if (mode == "tianli") {
                                                     startAI("æˆ‘æ˜¯æ–‡ç« è¾…åŠ©AI: TianliGPTï¼Œç‚¹å‡»ä¸‹æ–¹çš„æŒ‰é’®ï¼Œè®©æˆ‘ç”Ÿæˆæœ¬æ–‡ç®€ä»‹ã€æ¨èç›¸å…³æ–‡ç« ç­‰ã€‚")
                                                 } else {
                                                     startAI("æˆ‘æ˜¯æ–‡ç« è¾…åŠ©AI: KunKunYu GPTï¼Œç‚¹å‡»ä¸‹æ–¹çš„æŒ‰é’®ï¼Œè®©æˆ‘ç”Ÿæˆæœ¬æ–‡ç®€ä»‹ã€æ¨èç›¸å…³æ–‡ç« ç­‰ã€‚")
                                                 }
                                             }
                                             function aiTitleRefreshIconClick() {
                                                 aiTitleRefreshIcon.click()
                                             }
                                             const aiFunctions = [Introduce, aiTitleRefreshIconClick, aiRecommend, aiGoHome];
                                             ai_btn_item.forEach((item, index) => {
                                                 item.addEventListener("click", () => {
                                                     aiFunctions[index]();
                                                 });
                                             });

                                             function recommendList() {
                                                 let thumbnail = document.querySelectorAll('.relatedPosts-list a');
                                                 if (!thumbnail.length) {
                                                     const cardRecentPost = document.querySelector('.card-widget.card-recent-post');
                                                     if (!cardRecentPost) return '';

                                                     thumbnail = cardRecentPost.querySelectorAll('.aside-list-item a');

                                                     let list = '';
                                                     for (let i = 0; i < thumbnail.length; i++) {
                                                         const item = thumbnail[i];
                                                         list += `<div class="ai-recommend-item"><span class="index">${i + 1}ï¼š</span><a href="javascript:;" onclick="pjax.loadUrl('${item.href}')" title="${item.title}" data-pjax-state="">${item.title}</a></div>`;
                                                     }

                                                     return `å¾ˆæŠ±æ­‰ï¼Œæ— æ³•æ‰¾åˆ°ç±»ä¼¼çš„æ–‡ç« ï¼Œä½ ä¹Ÿå¯ä»¥çœ‹çœ‹æœ¬ç«™æœ€æ–°å‘å¸ƒçš„æ–‡ç« ï¼š<br /><div class="ai-recommend">${list}</div>`;
                                                 }

                                                 let list = '';
                                                 for (let i = 0; i < thumbnail.length; i++) {
                                                     const item = thumbnail[i];
                                                     list += `<div class="ai-recommend-item"><span>æ¨è${i + 1}ï¼š</span><a href="javascript:;" onclick="pjax.loadUrl('${item.href}')" title="${item.title}" data-pjax-state="">${item.title}</a></div>`;
                                                 }

                                                 return `æ¨èæ–‡ç« ï¼š<br /><div class="ai-recommend">${list}</div>`;
                                             }


                                             function changeShowMode() {
                                                 if (mode === "tianli") {
                                                     mode = "local";
                                                     document.getElementById("ai-tag").innerHTML = "KunKunYu GPT";
                                                     aiAbstract(1000);
                                                 } else {
                                                     mode = "tianli";
                                                     document.getElementById("ai-tag").innerHTML = "Tianli GPT";

                                                     const truncateDescription = ("" + "æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹, Tokenç›¸å…³, åˆ›å»ºnginxæœåŠ¡, æŸ¥çœ‹swarmé›†ç¾¤ä¸­çš„æœåŠ¡, killå…¶ä¸­ä¸€ä¸ªå®¹å™¨, ä¿®æ”¹æœåŠ¡å®ä¾‹æ•°é‡ä¸º3, åˆ é™¤nginxæœåŠ¡, åˆ é™¤swarmèŠ‚ç‚¹, docker swarm å¸¸ç”¨å‘½ä»¤, docker node å¸¸ç”¨å‘½ä»¤, docker service å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ç›¸å…³æŸ¥çœ‹åŠ å…¥çš„å‘½ä»¤æŸ¥çœ‹åŠ å…¥çš„å‘½ä»¤é‡ç½®çš„ä»…æ‰“å°åˆ›å»ºæœåŠ¡ä¸‹è½½ç§æœ‰ä»“åº“é•œåƒåˆ›å»ºä¸ªå®¹å™¨ä¸ºç§æœ‰ä»“åº“æŸ¥çœ‹é›†ç¾¤ä¸­çš„æœåŠ¡å…¶ä¸­ä¸€ä¸ªå®¹å™¨ç­‰ä¼šè‡ªåŠ¨å¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨ä¿®æ”¹æœåŠ¡å®ä¾‹æ•°é‡ä¸ºåˆ é™¤æœåŠ¡åˆ é™¤èŠ‚ç‚¹å¸¸ç”¨å‘½ä»¤åˆå§‹åŒ–é›†ç¾¤æŸ¥çœ‹å·¥ä½œèŠ‚ç‚¹çš„æŸ¥çœ‹ç®¡ç†èŠ‚ç‚¹çš„åŠ å…¥é›†ç¾¤ä¸­å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹åˆ é™¤æŸä¸ªèŠ‚ç‚¹å¼ºåˆ¶åˆ é™¤æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…èŠ‚ç‚¹é™çº§ç”±ç®¡ç†èŠ‚ç‚¹é™çº§ä¸ºå·¥ä½œèŠ‚ç‚¹èŠ‚ç‚¹å‡çº§ç”±å·¥ä½œèŠ‚ç‚¹å‡çº§ä¸ºç®¡ç†èŠ‚ç‚¹æ›´æ–°èŠ‚ç‚¹æŸ¥çœ‹èŠ‚ç‚¹ä¸­çš„ä»»åŠ¡å¸¸ç”¨å‘½ä»¤éƒ¨ç½²æœåŠ¡æŸ¥çœ‹æœåŠ¡è¯¦æƒ…äº§çœ‹æŸä¸ªæœåŠ¡æ—¥å¿—æŸ¥çœ‹æ‰€æœ‰æœåŠ¡è¯¦æƒ…åˆ é™¤æŸä¸ªæœåŠ¡å¼ºåˆ¶åˆ é™¤è®¾ç½®æŸä¸ªæœåŠ¡ä¸ªæ•°æ›´æ–°æŸä¸ªæœåŠ¡").trim().substring(0, 1000);
                                                     let value = Math.floor(Math.random() * 3) + 1000;
                                                     while (value === prevParam || truncateDescription.length - value === prevParam) {
                                                         value = Math.floor(Math.random() * 3) + 1000;
                                                     }
                                                     aiTitleRefreshIcon.style.opacity = "0.2";
                                                     aiTitleRefreshIcon.style.transitionDuration = "0.3s";
                                                     aiTitleRefreshIcon.style.transform = "rotate(" + 360 * refreshNum + "deg)";
                                                     if (truncateDescription.length <= 1000) {
                                                         let param = truncateDescription.length - Math.floor(Math.random() * 3);
                                                         while (param === prevParam) {
                                                             param = truncateDescription.length - Math.floor(Math.random() * 3);
                                                         }
                                                         aiAbstract(param);
                                                         prevParam = param;
                                                     } else {
                                                         aiAbstract(value);
                                                         prevParam = value;
                                                     }
                                                     refreshNum++;
                                                 }
                                             }

                                             //- ç›‘å¬tagç‚¹å‡»äº‹ä»¶
                                             document.getElementById("ai-tag").addEventListener("click", () => {
                                                 if (mode === "tianli") {
                                                     document.querySelectorAll(".ai-btn-item").forEach(item => item.style.display = "none");
                                                     document.getElementById("go-tianli-blog").style.display = "block";
                                                     startAI("ä½ å¥½ï¼Œæˆ‘æ˜¯Tianliå¼€å‘çš„æ‘˜è¦ç”ŸæˆåŠ©ç†TianliGPTï¼Œæ˜¯ä¸€ä¸ªåŸºäºGPT-4çš„ç”Ÿæˆå¼AIã€‚æˆ‘åœ¨è¿™é‡Œåªè´Ÿè´£æ‘˜è¦çš„é¢„ç”Ÿæˆå’Œæ˜¾ç¤ºï¼Œä½ æ— æ³•ä¸æˆ‘ç›´æ¥æ²Ÿé€šï¼Œå¦‚æœä½ ä¹Ÿéœ€è¦ä¸€ä¸ªè¿™æ ·çš„AIæ‘˜è¦æ¥å£ï¼Œå¯ä»¥åœ¨ä¸‹æ–¹è´­ä¹°ã€‚ï¼ˆæš‚æœªå¼€æ”¾è´­ä¹°ï¼Œæ•¬è¯·æœŸå¾…ï¼‰")
                                                 } else {
                                                     document.getElementById("go-tianli-blog").style.display = "none";
                                                     startAI("ä½ å¥½ï¼Œæˆ‘æ˜¯æœ¬ç«™æ‘˜è¦ç”ŸæˆåŠ©ç†KunKunYu GPTï¼Œæ˜¯ä¸€ä¸ªåŸºäºGPT-4çš„ç”Ÿæˆå¼AIã€‚æˆ‘åœ¨è¿™é‡Œåªè´Ÿè´£æ‘˜è¦çš„é¢„ç”Ÿæˆå’Œæ˜¾ç¤ºï¼Œä½ æ— æ³•ä¸æˆ‘ç›´æ¥æ²Ÿé€šã€‚")
                                                 }

                                             });

                                             aiTitleRefreshIcon.addEventListener("click", () => {
                                                 const truncateDescription = ("" + "æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹, Tokenç›¸å…³, åˆ›å»ºnginxæœåŠ¡, æŸ¥çœ‹swarmé›†ç¾¤ä¸­çš„æœåŠ¡, killå…¶ä¸­ä¸€ä¸ªå®¹å™¨, ä¿®æ”¹æœåŠ¡å®ä¾‹æ•°é‡ä¸º3, åˆ é™¤nginxæœåŠ¡, åˆ é™¤swarmèŠ‚ç‚¹, docker swarm å¸¸ç”¨å‘½ä»¤, docker node å¸¸ç”¨å‘½ä»¤, docker service å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹é›†ç¾¤èŠ‚ç‚¹ç›¸å…³æŸ¥çœ‹åŠ å…¥çš„å‘½ä»¤æŸ¥çœ‹åŠ å…¥çš„å‘½ä»¤é‡ç½®çš„ä»…æ‰“å°åˆ›å»ºæœåŠ¡ä¸‹è½½ç§æœ‰ä»“åº“é•œåƒåˆ›å»ºä¸ªå®¹å™¨ä¸ºç§æœ‰ä»“åº“æŸ¥çœ‹é›†ç¾¤ä¸­çš„æœåŠ¡å…¶ä¸­ä¸€ä¸ªå®¹å™¨ç­‰ä¼šè‡ªåŠ¨å¯åŠ¨ä¸€ä¸ªæ–°çš„å®¹å™¨ä¿®æ”¹æœåŠ¡å®ä¾‹æ•°é‡ä¸ºåˆ é™¤æœåŠ¡åˆ é™¤èŠ‚ç‚¹å¸¸ç”¨å‘½ä»¤åˆå§‹åŒ–é›†ç¾¤æŸ¥çœ‹å·¥ä½œèŠ‚ç‚¹çš„æŸ¥çœ‹ç®¡ç†èŠ‚ç‚¹çš„åŠ å…¥é›†ç¾¤ä¸­å¸¸ç”¨å‘½ä»¤æŸ¥çœ‹æ‰€æœ‰é›†ç¾¤èŠ‚ç‚¹åˆ é™¤æŸä¸ªèŠ‚ç‚¹å¼ºåˆ¶åˆ é™¤æŸ¥çœ‹èŠ‚ç‚¹è¯¦æƒ…èŠ‚ç‚¹é™çº§ç”±ç®¡ç†èŠ‚ç‚¹é™çº§ä¸ºå·¥ä½œèŠ‚ç‚¹èŠ‚ç‚¹å‡çº§ç”±å·¥ä½œèŠ‚ç‚¹å‡çº§ä¸ºç®¡ç†èŠ‚ç‚¹æ›´æ–°èŠ‚ç‚¹æŸ¥çœ‹èŠ‚ç‚¹ä¸­çš„ä»»åŠ¡å¸¸ç”¨å‘½ä»¤éƒ¨ç½²æœåŠ¡æŸ¥çœ‹æœåŠ¡è¯¦æƒ…äº§çœ‹æŸä¸ªæœåŠ¡æ—¥å¿—æŸ¥çœ‹æ‰€æœ‰æœåŠ¡è¯¦æƒ…åˆ é™¤æŸä¸ªæœåŠ¡å¼ºåˆ¶åˆ é™¤è®¾ç½®æŸä¸ªæœåŠ¡ä¸ªæ•°æ›´æ–°æŸä¸ªæœåŠ¡").trim().substring(0, 1000);
                                                 let value = Math.floor(Math.random() * 3) + 1000;
                                                 while (value === prevParam || truncateDescription.length - value === prevParam) {
                                                     value = Math.floor(Math.random() * 3) + 1000;
                                                 }
                                                 aiTitleRefreshIcon.style.opacity = "0.2";
                                                 aiTitleRefreshIcon.style.transitionDuration = "0.3s";
                                                 aiTitleRefreshIcon.style.transform = "rotate(" + 360 * refreshNum + "deg)";
                                                 if (truncateDescription.length <= 1000) {
                                                     let param = truncateDescription.length - Math.floor(Math.random() * 3);
                                                     while (param === prevParam) {
                                                         param = truncateDescription.length - Math.floor(Math.random() * 3);
                                                     }
                                                     aiAbstract(param);
                                                     prevParam = param;
                                                 } else {
                                                     aiAbstract(value);
                                                     prevParam = value;
                                                 }
                                                 showAiBtn();
                                                 refreshNum++;
                                             });

                                             document.getElementById("go-tianli-blog").addEventListener("click", () => {
                                                 window.open("https://afdian.net/item/886a79d4db6711eda42a52540025c377", "_blank");
                                             });

                                             if (false) {
                                                 document.getElementById("ai-Toggle").addEventListener("click", () => {
                                                     changeShowMode()
                                                 });
                                             }

                                             function showAiBtn() {
                                                 document.querySelectorAll(".ai-btn-item").forEach(item => {
                                                     if (item.id !== "go-tianli-blog") {
                                                         item.style.display = "block";
                                                     }
                                                     if (item.id === "go-tianli-blog") {
                                                         item.style.display = "none";
                                                     }
                                                 });
                                             }


                                             aiAbstract();
                                             showAiBtn()
                                         })()</script>
                </div> -->
                <!-- æ–‡ç« å†…å®¹ -->
                <article class="post-content line-numbers" id="article-container" th:utext="${post.content.content}">
                </article>


                <div class="post-tools" id="post-tools">
                    <div class="post-tools-left">

                        <!-- æ‰“èµ -->
                        <div th:if="${theme.config.post.reward.enable_reward && (not #strings.isEmpty(theme.config.post.reward.wxPay) || not #strings.isEmpty(theme.config.post.reward.alipay))}"
                             class="post-reward" onclick="AddRewardMask()">
                            <div class="reward-button button&#45;&#45;animated" title="èµèµä½œè€…"><i
                                    class="fas fa-hamburger"></i>
                                æ‰“èµä½œè€…
                            </div>
                            <div class="reward-main">
                                <ul class="reward-all"><span class="reward-title">æ„Ÿè°¢ä½ èµäºˆæˆ‘å‰è¿›çš„åŠ›é‡</span>
                                    <ul class="reward-group">
                                        <li class="reward-item"><a th:href="@{${theme.config.post.reward.wxPay}}"
                                                                   target="_blank">
                                            <img alt="å¾®ä¿¡" class="post-qr-code-img"
                                                 th:src="${theme.config.post.reward.wxPay}"></a>
                                            <div class="post-qr-code-desc">å¾®ä¿¡</div>
                                        </li>
                                        <li class="reward-item"><a th:href="@{${theme.config.post.reward.alipay}}"
                                                                   target="_blank"><img alt="æ”¯ä»˜å®"
                                                                                        class="post-qr-code-img"
                                                                                        th:src="${theme.config.post.reward.alipay}"></a>
                                            <div class="post-qr-code-desc">æ”¯ä»˜å®</div>
                                        </li>
                                    </ul>
                                    <a class="reward-main-btn" th:href="@{${theme.config.post.reward.reward_md_url}}"
                                       target="_blank">
                                        <div class="reward-text">èµèµè€…åå•</div>
                                        <div class="reward-dec">å› ä¸ºä½ ä»¬çš„æ”¯æŒè®©æˆ‘æ„è¯†åˆ°å†™æ–‡ç« çš„ä»·å€¼ğŸ™</div>
                                    </a>
                                </ul>
                            </div>
                        </div>

                        <!-- è¯´æ˜ -->
                        <div th:if="${theme.config.post.post_edit.enable_post_edit}" class="reward-link mode"><a
                                class="reward-link-button" th:href="@{${theme.config.post.post_edit.post_edit_url}}">
                            <i class="fas fa-seedling"></i>è¿è¥æ¨¡å¼ä¸è´£ä»»</a>
                        </div>

                        <!-- åˆ†äº« -->
                        <div class="share-link mobile">
                            <div class="share-qrcode">
                                <div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i
                                        class="iconfont icon-qrcode"></i>
                                </div>
                                <div class="share-main">
                                    <div class="share-main-all">
                                        <div id="qrcode"></div>
                                        <div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="share-link weibo">
                            <a class="share-button" rel="noopener external nofollow noreferrer noopener" target="_blank"
                               th:href="'https://service.weibo.com/share/share.php?title=' + ${post.spec.title}"
                               title="åˆ†äº«åˆ°å¾®åš">
                                <i class="iconfont icon-weibo" style="font-size:22px"></i></a>
                        </div>
                        <div class="share-link copyurl">
                            <div class="share-button" id="post-share-url" onclick="rm.copyPageUrl()" title="å¤åˆ¶é“¾æ¥"><i
                                    class="iconfont icon-link"></i></div>
                        </div>
                    </div>
                    <div class="post-tools-right">
                        <div class="tag_share">
                            <div class="post-meta__tag-list">
                                <a class="post-meta__tags" th:each="tag : ${post.tags}"
                                   th:href="@{${tag.status.permalink}}">
                                    <span class="tags-punctuation">#</span>
                                    <th:block th:text="${tag.spec.displayName}" th:title="${tag.spec.displayName}">
                                    </th:block>
                                    <span class="tagsPageCount" th:text="${tag.status.visiblePostCount}"></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç‰ˆæƒå£°æ˜ -->
                <div class="post-copyright" th:if="${theme.config.post.copyright}">
                    <div class="post-copyright__author">
                        <!-- ç‰ˆæƒé¡µ ä»¥åŠç‰ˆæƒæè¿°æ–‡å­— -->
                        <a class="post-copyright__original" th:href="@{${theme.config.basics.copyrightAgreement}}"
                           title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®">åŸåˆ›</a>
                        <a class="post-copyright-title" href="#"><span th:text="${post.spec.title}"></span></a>
                    </div>
                    <div class="post-copyright__type">
                        <span class="post-copyright-info" id="post-copyright-url">
                            <a href="javascript:window.location.href;">[[${post.spec.title}]]</a>
                        </span>
                        <button class="post-copyright-copybtn" onclick="rm.copyPageUrl()">
                            <i class="iconfont icon-paste"></i>
                        </button>
                    </div>
                    <div class="post-copyright__notice">
                        <span class="post-copyright-info" th:utext="${theme.config.post.copyrightInfo}"></span>
                    </div>
                </div>
                <nav class="pagination-post" id="pagination"
                     th:with="postCursor = ${postFinder.cursor(post.metadata.name)}">
                    <div class="prev-post pull-left">
                        <a th:if="${postCursor.hasPrevious()}" th:href="@{${postCursor.previous.status.permalink}}">
                            <div class="pagination-info">
                                <div class="label">ä¸Šä¸€ç¯‡</div>
                                <div class="prev_info" th:text="${postCursor.previous.spec.title}"></div>
                            </div>
                        </a>
                    </div>
                    <div class="next-post pull-right">
                        <a th:if="${postCursor.hasNext()}" th:href="@{${postCursor.next.status.permalink}}">
                            <div class="pagination-info">
                                <div class="label">ä¸‹ä¸€ç¯‡</div>
                                <div class="next_info" th:text="${postCursor.next.spec.title}"></div>
                            </div>
                        </a>
                    </div>
                </nav>
                <div class="relatedPosts" th:if="${not #lists.isEmpty(post.categories)}">

                    <div class="headline">
                        <i class="iconfont icon-robot"></i>
                        <span>é˜…è¯»å»ºè®®</span>
                    </div>
                    <div class="relatedPosts-list"
                         th:with="recommandPosts = ${postFinder.listByCategory(1, theme.config.post.recommendQuantity, post.categories.get(0).metadata.name)}">
                        <!-- å»ºè®®é˜…è¯»ï¼Œè¿™é‡Œå¯ä»¥è‡ªå®šä¹‰æ–‡ç« æ•°é‡ï¼Œç„¶åéå†å±•ç¤º -->
                        <div th:each="recommandPost :${recommandPosts}">
                            <a th:href="@{${recommandPost.status.permalink}}" th:title="${recommandPost.spec.title}">
                                <img alt="cover" class="cover" loading="lazy"
                                     th:src="${#strings.isEmpty(recommandPost.spec.cover) ? theme.config.layout.postRandomImg : recommandPost.spec.cover}">
                                <div class="content is-center">
                                    <div class="date"><i class="far fa-calendar-alt fa-fw"></i>
                                        [[${#dates.format(recommandPost.spec.publishTime,'yyyy-MM-dd HH:mm:ss')}]]
                                    </div>
                                    <div class="title" th:text="${recommandPost.spec.title}"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                <hr>
                <!-- è¯„è®ºæ¨¡å— -->
                <th:block
                        th:if="${post.spec.allowComment && theme.config.comments.twikoo && #strings.equals(theme.config.comments.use, 'Twikoo') && not #strings.isEmpty(theme.config.comments.envId)}">
                    <div th:replace="~{modules/twikoo :: twikoo}"></div>
                </th:block>
                <div id="post-comment"
                     th:if="${post.spec.allowComment && pluginFinder.available('PluginCommentWidget') && #strings.equals(theme.config.comments.use, 'commentWidget')}">
                    <div class="comment-head">
                        <div class="comment-headline"><i class="iconfont icon-comment-alt"></i> <span>è¯„è®º</span></div>
                        <div class="comment-privacy"><a href="/privacy">éšç§æ”¿ç­–</a></div>
                        <div class="comment-tips" id="comment-tips">
                            <span>ä½ æ— éœ€åˆ é™¤ç©ºè¡Œï¼Œç›´æ¥è¯„è®ºä»¥è·å–æœ€ä½³å±•ç¤ºæ•ˆæœ</span>
                        </div>
                    </div>
                    <halo:comment group="content.halo.run" kind="SinglePage" th:attr="name='links'"
                                  colorScheme="document.documentElement.getAttribute('data-theme')"/>
                </div>

            </div>

            <!-- ä¾§æ  -->
            <div th:replace="~{modules/aside :: aside(${theme.config.sidebar.postWidgets})}"></div>
        </main>

        <!-- åº•éƒ¨ -->
        <footer th:replace="~{modules/footer :: footer}"></footer>

    </div>

</th:block>

</html>